"use strict";(self.webpackChunkdharmas_cipher=self.webpackChunkdharmas_cipher||[]).push([[801],{801:(e,n,t)=>{t.r(n),t.d(n,{default:()=>he});var a=t(555),i=t(528),r=t(43),o=t(464),s=t(67),l=t(585);const c=[{id:1,title:"The Two Paths",description:"You discover a hidden chamber. One path is crumbling but direct. The other is longer, safer, and winds through a library of forgotten lore. Which do you choose?",illustration:"ancient_chamber",choices:[{id:"A",text:"The direct, dangerous path.",guna:"RAJAS",points:1,seed:"\u0936\u0942\u0930\u092e\u093e\u0930\u094d\u0917\u0903",transliteration:"\u015a\u016bra M\u0101rga\u1e25",annotation:"The Hero's Path."},{id:"B",text:"The longer, wiser path.",guna:"SATTVA",points:1,seed:"\u091c\u094d\u091e\u093e\u0928\u092e\u093e\u0930\u094d\u0917\u0903",transliteration:"J\xf1\u0101na M\u0101rga\u1e25",annotation:"The Path of Knowledge."}]},{id:2,title:"The Inert Stone",description:"An ancient mechanism is blocked by a massive, inert stone. How do you proceed?",illustration:"blocked_mechanism",choices:[{id:"A",text:"Attempt to move it by sheer, exhaustive effort.",guna:"RAJAS",points:1,seed:"\u092a\u094d\u0930\u092f\u0924\u094d\u0928\u092c\u0932\u092e\u094d",transliteration:"Prayatna Balam",annotation:"The Strength of Effort."},{id:"B",text:"Search for a complex system of counterweights and levers.",guna:"SATTVA",points:1,seed:"\u092f\u0941\u0915\u094d\u0924\u093f\u0915\u094c\u0936\u0932\u092e\u094d",transliteration:"Yukti Kau\u015balam",annotation:"The Skill of Ingenuity."},{id:"C",text:"Accept it as insurmountable and seek another way forward.",guna:"TAMAS",points:1,seed:"\u0905\u0928\u094d\u092f\u0909\u092a\u093e\u092f\u0903",transliteration:"Anya Up\u0101ya\u1e25",annotation:"Another Way."}]},{id:3,title:"The Guardian Spirit",description:"A guardian spirit bars your way, radiating hostility but also pain. How do you proceed?",illustration:"guardian_spirit",choices:[{id:"A",text:"Offer a calming ritual to soothe its suffering.",gana:"DEVA",points:1,seed:"\u0936\u093e\u0928\u094d\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e",transliteration:"\u015a\u0101nti Kriy\u0101",annotation:"An Act of Peace."},{id:"B",text:"Attempt to reason with it to negotiate passage.",gana:"MANUSHYA",points:1,seed:"\u0924\u0930\u094d\u0915\u0938\u0902\u0935\u093e\u0926\u0903",transliteration:"Tarka Sa\u1e43v\u0101da\u1e25",annotation:"A Discerning Dialogue."},{id:"C",text:"Use its aggression against it to create a diversion.",gana:"RAKSHASA",points:1,seed:"\u091b\u0932\u0928\u0940\u0924\u093f\u0903",transliteration:"Chala N\u012bti\u1e25",annotation:"A Cunning Strategy."}]},{id:4,title:"The Stolen Manuscript",description:"You learn a rival scholar stole a crucial manuscript from a monastery. Do you...",illustration:"stolen_manuscript",choices:[{id:"A",text:"Inform the monastery's abbot and trust in their process.",guna:"SATTVA",points:1,seed:"\u0927\u0930\u094d\u092e\u0930\u0915\u094d\u0937\u0923\u092e\u094d",transliteration:"Dharma Rak\u1e63a\u1e47am",annotation:"The Protection of Duty."},{id:"B",text:"Confront the scholar directly and demand its return.",guna:"RAJAS",points:1,seed:"\u092a\u094d\u0930\u0924\u094d\u092f\u0915\u094d\u0937\u092a\u094d\u0930\u0924\u093f\u0935\u093e\u0926\u0903",transliteration:"Pratyak\u1e63a Prativ\u0101da\u1e25",annotation:"A Direct Confrontation."},{id:"C",text:"Find a way to steal the manuscript back without confrontation.",guna:"TAMAS",points:1,seed:"\u0917\u0941\u092a\u094d\u0924\u092a\u094d\u0930\u0924\u093f\u0915\u093e\u0930\u0903",transliteration:"Gupta Pratik\u0101ra\u1e25",annotation:"A Secret Remedy."}]},{id:5,title:"The River's Toll",description:"A ferryman demands an exorbitant fee to cross a river, a fee the poor cannot pay. Do you...",illustration:"river_crossing",choices:[{id:"A",text:"Pay the fee for yourself and for the next family in line.",gana:"DEVA",points:1,seed:"\u0915\u0930\u0941\u0923\u093e\u0926\u093e\u0928\u092e\u094d",transliteration:"Karu\u1e47\u0101 D\u0101nam",annotation:"The Gift of Compassion."},{id:"B",text:"Intimidate the ferryman into lowering his price for everyone.",gana:"RAKSHASA",points:1,seed:"\u092d\u092f\u0936\u093e\u0938\u0928\u092e\u094d",transliteration:"Bhaya \u015a\u0101sanam",annotation:"Rule by Fear."},{id:"C",text:"Organize the villagers to build a simple bridge, making the ferryman obsolete.",gana:"MANUSHYA",points:1,seed:"\u0932\u094b\u0915\u0938\u0902\u0917\u094d\u0930\u0939\u0903",transliteration:"Loka Sa\u1e45graha\u1e25",annotation:"The Welfare of the People."}]},{id:6,title:"The Flawed Ritual",description:"You observe a priest performing a complex ritual with a minor but significant error you recognize. Do you...",illustration:"flawed_ritual",choices:[{id:"A",text:"Approach him privately after the ritual to gently point out the error.",guna:"SATTVA",points:1,seed:"\u0935\u093f\u0935\u0947\u0915\u0935\u091a\u0928\u092e\u094d",transliteration:"Viveka Vacanam",annotation:"A Word of Wisdom."},{id:"B",text:"Say nothing. It is not your place to interfere.",guna:"TAMAS",points:1,seed:"\u0905\u0915\u0930\u094d\u0924\u093e\u092d\u093e\u0935\u0903",transliteration:"Akart\u0101 Bh\u0101va\u1e25",annotation:"The State of Non-Doing."},{id:"C",text:"Interrupt the ritual to correct him, ensuring it is performed perfectly for the benefit of all.",guna:"RAJAS",points:1,seed:"\u0915\u0930\u094d\u092e\u0936\u0941\u0926\u094d\u0927\u093f\u0903",transliteration:"Karma \u015auddhi\u1e25",annotation:"The Purity of Action."}]},{id:7,title:"The Dying Master's Secret",description:"Your dying master offers to tell you the ultimate secret of the cosmos, but warns it will bring you great sorrow. Do you...",illustration:"dying_master",choices:[{id:"A",text:"Listen. Knowledge, no matter the cost, is the goal.",guna:"SATTVA",points:1,seed:"\u0938\u0924\u094d\u092f\u091c\u093f\u091c\u094d\u091e\u093e\u0938\u093e",transliteration:"Satya Jij\xf1\u0101s\u0101",annotation:"The Thirst for Truth."},{id:"B",text:"Refuse. Some knowledge is not meant for mortals.",guna:"TAMAS",points:1,seed:"\u092e\u0930\u094d\u092f\u093e\u0926\u093e\u092a\u093e\u0932\u0928\u092e\u094d",transliteration:"Mary\u0101d\u0101 P\u0101lanam",annotation:"The Observance of Limits."},{id:"C",text:"Ask him to write it down, to be opened only when you are truly ready.",gana:"MANUSHYA",points:1,seed:"\u0915\u093e\u0932\u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e",transliteration:"K\u0101la Prat\u012bk\u1e63\u0101",annotation:"Awaiting the Right Time."}]},{id:8,title:"The Source of Power",description:"You discover the source of a temple's mystical power is a rare lotus that is slowly being drained of its life. Do you...",illustration:"dying_lotus",choices:[{id:"A",text:"Destroy the temple's focusing lens, breaking the drain on the lotus.",guna:"RAJAS",points:1,seed:"\u0924\u0924\u094d\u0915\u094d\u0937\u0923\u092e\u094b\u0915\u094d\u0937\u0903",transliteration:"Tat-k\u1e63a\u1e47a Mok\u1e63a\u1e25",annotation:"An Instant Liberation."},{id:"B",text:"Reroute the power, allowing the temple to function at reduced capacity while the lotus recovers.",gana:"MANUSHYA",points:1,seed:"\u0938\u092e\u0928\u094d\u0935\u092f\u0938\u092e\u093e\u0927\u093e\u0928\u092e\u094d",transliteration:"Samanvaya Sam\u0101dh\u0101nam",annotation:"A Harmonious Solution."},{id:"C",text:"Perform a ritual to sacrifice a part of your own life force to heal the lotus.",gana:"DEVA",points:1,seed:"\u0906\u0924\u094d\u092e\u092f\u091c\u094d\u091e\u0903",transliteration:"\u0100tma Yaj\xf1a\u1e25",annotation:"The Self-Sacrifice."}]},{id:9,title:"The Unjust Law",description:"You arrive in a city where a new law mandates the imprisonment of anyone possessing 'forbidden texts'\u2014the very kind you seek. Do you...",illustration:"forbidden_city",choices:[{id:"A",text:"Operate in the shadows, avoiding all contact with authorities.",guna:"TAMAS",points:1,seed:"\u092a\u094d\u0930\u091a\u094d\u091b\u0928\u094d\u0928\u0935\u0943\u0924\u094d\u0924\u093f\u0903",transliteration:"Pracchanna V\u1e5btti\u1e25",annotation:"A Veiled Existence."},{id:"B",text:"Openly defy the law, believing knowledge should be free.",guna:"RAJAS",points:1,seed:"\u0928\u094d\u092f\u093e\u092f\u0906\u0917\u094d\u0930\u0939\u0903",transliteration:"Ny\u0101ya \u0100graha\u1e25",annotation:"The Insistence on Justice."},{id:"C",text:"Seek a patron or official who can grant you special dispensation.",gana:"MANUSHYA",points:1,seed:"\u0930\u093e\u091c\u0905\u0928\u0941\u0917\u094d\u0930\u0939\u0903",transliteration:"R\u0101ja Anugraha\u1e25",annotation:"The Favor of Authority."}]},{id:10,title:"The Final Choice",description:"Before you is a single, perfect pearl. A note explains it can either grant you a vision of a forgotten truth or be crushed to create a panacea that can cure any disease. Do you...",illustration:"perfect_pearl",choices:[{id:"A",text:"Seek the vision of truth.",guna:"SATTVA",points:1,seed:"\u0938\u0924\u094d\u092f\u0926\u0930\u094d\u0936\u0928\u092e\u094d",transliteration:"Satya Dar\u015banam",annotation:"A Vision of Truth."},{id:"B",text:"Create the panacea for others.",gana:"DEVA",points:1,seed:"\u0938\u0930\u094d\u0935\u0939\u093f\u0924\u092e\u094d",transliteration:"Sarva Hitam",annotation:"For the Good of All."},{id:"C",text:"Take the pearl. Such power should be wielded, not consumed.",gana:"RAKSHASA",points:1,seed:"\u0936\u0915\u094d\u0924\u093f\u0927\u093e\u0930\u0923\u092e\u094d",transliteration:"\u015aakti Dh\u0101ra\u1e47am",annotation:"The Wielding of Power."}]}],d={DEVA:[{name:"Ashwini",description:"Born under the Star of Healing, you are a guardian of wisdom and a source of restoration to others.",skill:"Healer's Grace",skillDescription:"Restorative items and safe havens glow with a gentle light.",rashi:"Mesha",element:"Fire"},{name:"Mrigashira",description:"Born under the Star of the Seeker, you possess an innate ability to find the right path.",skill:"Seeker's Instinct",skillDescription:"The correct path in a maze-like area will occasionally shimmer with a faint, silvery light.",rashi:"Vrishabha",element:"Earth"},{name:"Punarvasu",description:"Born under the Star of Renewal, you are a guardian of wisdom and a source of comfort to others.",skill:"Aditi's Blessing",skillDescription:"Resting at a safe haven provides a temporary bonus to your next dialogue check.",rashi:"Mithuna",element:"Air"},{name:"Pushya",description:"Born under the Star of Nourishment, you enhance the wisdom of others.",skill:"Nourishing Light",skillDescription:'Consumable items provide a slight, temporary boost to your "Sage\'s Insight" ability.',rashi:"Karka",element:"Water"},{name:"Hasta",description:"Born under the Star of the Skillful Hand, you have an affinity for mechanical solutions.",skill:"Golden Hand",skillDescription:"You have a small chance to automatically solve simple mechanical puzzles.",rashi:"Kanya",element:"Earth"},{name:"Swati",description:"Born under the Star of Independence, you hear the whispers of the wind.",skill:"Wind's Whisper",skillDescription:"Acoustic puzzles have clearer, more distinct tones, and wind direction can subtly reveal secrets.",rashi:"Tula",element:"Air"},{name:"Anuradha",description:"Born under the Star of Friendship, you inspire trust and goodwill in others.",skill:"Mitra's Bond",skillDescription:"Friendly NPCs are more likely to offer additional, unsolicited clues or small gifts.",rashi:"Vrishchika",element:"Water"},{name:"Shravana",description:"Born under the Star of Learning, you can hear echoes of the past.",skill:"Sacred Ear",skillDescription:"Faint echoes of past, important conversations can be heard in significant locations.",rashi:"Makara",element:"Earth"},{name:"Revati",description:"Born under the Star of the Pathfinder, you illuminate the way forward.",skill:"Pathfinder's Light",skillDescription:"The in-game map reveals slightly more detail around your current location.",rashi:"Meena",element:"Water"}],MANUSHYA:[{name:"Bharani",description:"Born under the Star of Restraint, you can see the echoes of death and transformation.",skill:"Yama's Gaze",skillDescription:"Allows you to occasionally see the 'death echo' of an object, revealing its past use in a brief, ghostly vision.",rashi:"Mesha",element:"Fire"},{name:"Rohini",description:"Born under the Star of Creation, you possess natural charm and persuasive abilities.",skill:"Creator's Charm",skillDescription:"Dialogue checks related to bartering, trade, or gaining access to restricted areas are more likely to succeed.",rashi:"Vrishabha",element:"Earth"},{name:"Ardra",description:"Born under the Star of Storms, you find clarity in chaos.",skill:"Rudra's Tear",skillDescription:"When a puzzle is causing confusion, you gain a brief moment of clarity where all UI distractions fade.",rashi:"Mithuna",element:"Air"},{name:"Purva Phalguni",description:"Born under the Star of Fortune, luck favors your endeavors.",skill:"Bhaga's Fortune",skillDescription:"You have a small chance to find extra currency or a minor consumable item in containers.",rashi:"Simha",element:"Fire"},{name:"Uttara Phalguni",description:"Born under the Star of Patronage, you excel at forming beneficial relationships.",skill:"Aryaman's Pact",skillDescription:"Dialogue choices based on making contracts or promises have a higher chance of success.",rashi:"Simha",element:"Fire"},{name:"Purva Ashadha",description:"Born under the Star of Invincibility, you flow like an unstoppable current.",skill:"Invincible Current",skillDescription:"Gain a temporary speed boost after successfully solving a water-based puzzle.",rashi:"Dhanu",element:"Fire"},{name:"Uttara Ashadha",description:"Born under the Star of Victory, you possess universal sight.",skill:"Universal Sight",skillDescription:"Once per major area, you can activate an ability to reveal all interactable objects in your immediate vicinity.",rashi:"Dhanu",element:"Fire"},{name:"Purva Bhadrapada",description:"Born under the Star of Burning, pain reveals hidden truths.",skill:"Penitent's Fire",skillDescription:"Taking damage has a small chance to briefly reveal a hidden weakness in an environmental trap.",rashi:"Kumbha",element:"Air"},{name:"Uttara Bhadrapada",description:"Born under the Star of the Deep, you perceive hidden depths.",skill:"Serpent's Depth",skillDescription:"Hidden passages or secret doors have a slightly more noticeable visual or auditory cue.",rashi:"Meena",element:"Water"}],RAKSHASA:[{name:"Krittika",description:"Born under the Star of Fire, you command the cutting edge of illumination.",skill:"Agni's Edge",skillDescription:"You can interact with certain fire sources to create a brighter, wider light, revealing more of the environment.",rashi:"Mesha",element:"Fire"},{name:"Ashlesha",description:"Born under the Star of the Serpent, poisons hold no power over you.",skill:"Naga's Coil",skillDescription:"You can automatically bypass simple poison or venom-based traps without harm.",rashi:"Karka",element:"Water"},{name:"Magha",description:"Born under the Star of Ancestry, you commune with the echoes of the dead.",skill:"Ancestor's Echo",skillDescription:"Interacting with skeletal remains or tombs might trigger a ghostly vision of the person's last moments.",rashi:"Simha",element:"Fire"},{name:"Chitra",description:"Born under the Star of the Divine Architect, you see the flaws in all constructions.",skill:"Divine Architect",skillDescription:"You can spot structural weaknesses in walls or floors, sometimes revealing shortcuts or hidden areas.",rashi:"Kanya",element:"Earth"},{name:"Vishakha",description:"Born under the Star of Purpose, your goals burn clear and bright.",skill:"Focused Goal",skillDescription:"The main objective marker on your map is always visible, even when scrambled by other effects.",rashi:"Tula",element:"Air"},{name:"Jyeshtha",description:"Born under the Star of the Elder, your presence commands respect through strength.",skill:"Indra's Pride",skillDescription:"Successfully intimidating an NPC provides a temporary bonus to your next persuasion attempt.",rashi:"Vrishchika",element:"Water"},{name:"Mula",description:"Born under the Star of the Root, you excel at destruction that clears the way for new growth.",skill:"Root of Ruin",skillDescription:"You can interact with certain decaying structures to bring them down, clearing a path or blocking pursuers.",rashi:"Dhanu",element:"Fire"},{name:"Dhanishta",description:"Born under the Star of Prosperity, you move to the rhythm of cosmic music.",skill:"Rhythmic Heart",skillDescription:"Timed puzzles that rely on rhythm have a slightly more generous timing window.",rashi:"Makara",element:"Earth"},{name:"Shatabhisha",description:"Born under the Star of a Hundred Healers, you work from the shadows.",skill:"Veiled Healer",skillDescription:"Once per area, you can create a 'shroud' of shadows, making you harder to detect by non-magical guardians for a short time.",rashi:"Kumbha",element:"Air"}]},h={SATTVA:{name:"Sage's Insight",description:"Interactable objects shimmer with a faint golden light. Text-based puzzles may have certain keywords highlighted."},RAJAS:{name:"Scion's Vigor",description:"You can move heavy objects 25% faster and have a slightly longer sprint duration."},TAMAS:{name:"Shadow's Patience",description:"Environmental hazards (e.g., poison darts, gas) deal 50% less damage. You can hold your breath twice as long."}};function u(e){const n={guna:{SATTVA:0,RAJAS:0,TAMAS:0},gana:{DEVA:0,MANUSHYA:0,RAKSHASA:0}};e.forEach(e=>{e.guna&&(n.guna[e.guna]+=e.points),e.gana&&(n.gana[e.gana]+=e.points)});const t=Object.keys(n.guna).reduce((e,t)=>n.guna[e]>n.guna[t]?e:t),a=Object.keys(n.gana).reduce((e,t)=>n.gana[e]>n.gana[t]?e:t),i=Math.max(...Object.values(n.guna).filter(e=>e!==n.guna[t])),r=Object.keys(n.guna).find(e=>n.guna[e]===i),o=d[a];let s;s="SATTVA"===r?o[Math.floor(.33*o.length)]:"RAJAS"===r?o[Math.floor(.66*o.length)]:o[0];const l=function(e){const n=[];return e.forEach(e=>{const t=c.find(n=>n.id===e.questionId);if(!t)return;const a=t.choices.find(n=>n.id===e.choiceId);a&&a.seed&&n.push({seed:a.seed,transliteration:a.transliteration,annotation:a.annotation})}),n}(e);return{primaryGuna:t,primaryGana:a,nakshatra:s,rashi:s.rashi,skills:[h[t],{name:s.skill,description:s.skillDescription}],scores:n,atmanVakya:l,atmanVakyaText:l.map(e=>e.seed).join(" \xb7 ")}}var p,m,g,f,y,b,v=t(579);const x=o.Ay.div(p||(p=(0,i.A)(["\n  width: min(32vw, 360px);\n  height: ",";\n  border: 1px solid rgba(212,175,55,0.28);\n  border-radius: 14px;\n  background: linear-gradient(145deg, rgba(0,0,0,0.78), rgba(10,10,10,0.92));\n  box-shadow: 0 16px 40px rgba(0,0,0,0.5);\n  overflow: hidden;\n  transition: height 220ms ease, width 220ms ease, transform 220ms ease;\n  position: ",";\n  top: ",";\n  right: ",";\n  width: ",";\n  z-index: ",";\n"])),e=>e.$min?"42px":"360px",e=>e.$min?"absolute":"static",e=>e.$min?"14px":"auto",e=>e.$min?"14px":"auto",e=>e.$min?"auto":"min(32vw, 360px)",e=>e.$min?5:2),A=o.Ay.div(m||(m=(0,i.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n  padding: 8px 10px;\n  border-bottom: 1px solid rgba(212,175,55,0.22);\n  color: #e6c76a;\n  font-family: var(--font-primary);\n  font-weight: 700;\n  letter-spacing: 0.02em;\n  font-size: 0.95rem;\n"]))),w=o.Ay.button(g||(g=(0,i.A)(["\n  appearance: none;\n  padding: 6px 10px;\n  border-radius: 8px;\n  border: 1px solid rgba(212,175,55,0.35);\n  background: linear-gradient(145deg, rgba(0,0,0,0.82), rgba(18,18,18,0.95));\n  color: #e8c86a;\n  font-family: var(--font-primary);\n  font-weight: 700;\n  letter-spacing: 0.02em;\n  cursor: pointer;\n"]))),k=o.Ay.canvas(f||(f=(0,i.A)(["\n  width: 100%;\n  height: 100%;\n  display: block;\n"]))),S=o.Ay.div(y||(y=(0,i.A)(["\n  position: relative;\n  width: 100%;\n  height: ",";\n  overflow: hidden;\n  transition: height 200ms ease;\n"])),e=>e.$min?"0px":"calc(100% - 42px)"),T=o.Ay.div(b||(b=(0,i.A)(["\n  position: absolute;\n  transform: translate(-50%, -120%);\n  padding: 12px 14px;\n  border-radius: 12px;\n  border: 1px solid rgba(212,175,55,0.5);\n  background: linear-gradient(145deg, rgba(0,0,0,0.94), rgba(12,12,12,0.99));\n  color: #f3dfa0;\n  font-family: var(--font-primary);\n  font-size: 0.94rem;\n  line-height: 1.32;\n  pointer-events: none;\n  white-space: normal;\n  display: inline-block;\n  box-shadow: 0 10px 28px rgba(0,0,0,0.55);\n  opacity: 0;\n  transition: opacity 160ms ease;\n  backdrop-filter: blur(6px);\n\n  &.visible { opacity: 1; }\n\n  &::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    bottom: -6px;\n    transform: translateX(-50%);\n    width: 0; height: 0;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n    border-top: 6px solid rgba(212,175,55,0.5);\n  }\n\n  .tip-sk { font-family: var(--font-display); font-weight: 700; color: #f6e7b5; display: block; margin-bottom: 2px; }\n  .tip-tr { opacity: 0.95; color: #e9d68f; font-style: italic; display: block; }\n  .tip-ann { opacity: 0.88; color: #d7be73; display: block; margin-top: 2px; }\n"])));function M(e){let{pool:n,discovered:t}=e;const[a,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)({x:0,y:0,active:!1}),[c,d]=(0,r.useState)(null),h=(0,r.useMemo)(()=>n&&n.length?n.slice(0):[],[n]);return(0,r.useEffect)(()=>{const e=o.current;if(!e)return;const n=e.getBoundingClientRect(),a=Math.min(2,window.devicePixelRatio||1);e.width=Math.floor(n.width*a),e.height=Math.floor(n.height*a);const i=e.getContext("2d");i.setTransform(1,0,0,1,0,0),i.scale(a,a),i.imageSmoothingEnabled=!0;const r=n.width,u=n.height,p=(e=>{let n=e>>>0;return()=>(n=1664525*n+1013904223>>>0)/4294967296})(1234567),m=h.map((e,n)=>{const a=.6+.8*p(),i=12+22*p(),o=p()*Math.PI*2,s=40+p()*(r-80),l=40+p()*(u-80),c=.08*(p()-.5),d=.9+.2*(a-.6);return{id:e.id,sk:e.sk,en:e.en,tr:e.tr,ann:e.ann,x:s,y:l,vx:Math.cos(o)*i*(.15+.3*(1.6-a)),vy:Math.sin(o)*i*(.15+.3*(1.6-a)),rot:c,depth:a,scale:d,glow:0,discovered:!!t[e.id]}}),g="600 20px Noto Serif Devanagari, Noto Sans Devanagari, serif",f="italic 12px Crimson Text, serif";const y=m.map(function(e){i.save(),i.font=g;const n=i.measureText(e.sk).width;i.font=f;const t=i.measureText(e.en).width;return i.restore(),{width:Math.max(n,t)+16,height:44}});let b=performance.now();function v(e){const n=Math.min(40,e-b)/1e3;b=e,i.clearRect(0,0,r,u);let t=-1;if(l.current.active){const n=l.current.x,a=l.current.y-42;let i=-1,r=1/0;for(let o=0;o<m.length;o++){const s=m[o],l=y[o],c=.92+.06*Math.sin(.0015*e+o),d=s.scale*c,h=n-s.x,u=a-s.y,p=Math.cos(s.rot),g=Math.sin(s.rot),f=(p*h+g*u)/d,b=(-g*h+p*u)/d,v=26,x=18;if(Math.abs(f)<=l.width/2+v&&Math.abs(b)<=l.height/2+x){t=o;break}const A=h*h+u*u;A<r&&(r=A,i=o)}-1===t&&i>=0&&r<=5625&&(t=i)}for(let a=0;a<m.length;a++){const e=m[a];for(let n=a+1;n<m.length;n++){const t=m[n],i=t.x-e.x,r=t.y-e.y,o=i*i+r*r,s=.25*(y[a].width+y[n].width);if(o<s*s){const n=Math.sqrt(o)||1,a=i/n,l=r/n,c=.4*(s-n);e.x-=a*c,e.y-=l*c,t.x+=a*c,t.y+=l*c}}}for(let a=0;a<m.length;a++){const o=m[a],s=y[a],l=.6+.4*(1.6-o.depth);o.x+=o.vx*l*n,o.y+=o.vy*l*n,o.rot+=.0015*Math.sin(.001*e+a);const c=.92+.06*Math.sin(.0015*e+a);o.scale=.85+.22*(o.depth-.6);const d=.55+.25*(1.6-o.depth),h=s.width/2,p=s.height/2;o.x<h&&(o.x=h,o.vx*=-1),o.x>r-h&&(o.x=r-h,o.vx*=-1),o.y<p&&(o.y=p,o.vy*=-1),o.y>u-p&&(o.y=u-p,o.vy*=-1);const b=a===t;o.glow+=((b?1:0)-o.glow)*Math.min(1,8*n),i.save(),i.translate(o.x,o.y),i.rotate(o.rot),i.scale(o.scale*c,o.scale*c),i.globalAlpha=d,i.shadowColor="rgba(255, 230, 140, 0.55)",i.shadowBlur=8*(.5+o.glow+(o.discovered?.6:0)),i.textAlign="center",i.textBaseline="middle",i.fillStyle="#f6e1a0",i.font=g,i.fillText(o.sk,0,-6),i.globalAlpha=.9*d,i.fillStyle="#d7be73",i.font=f,i.fillText(o.en,0,12),i.restore()}if(t>=0){const e=m[t],n=Math.max(14,Math.min(r-14,e.x)),a=Math.max(14,Math.min(u-14,e.y+14));i.save(),i.font=g;const o=Math.ceil(i.measureText(e.sk||"").width);i.font=f;const s=Math.ceil(i.measureText(e.tr||"").width),l=Math.ceil(i.measureText(e.ann||"").width);i.restore();const c=Math.max(o,s,l),h=28,p=Math.max(160,Math.min(r-28,c+h));d({x:n,y:a,sk:e.sk,tr:e.tr,ann:e.ann,w:p})}else c&&d(null);s.current=requestAnimationFrame(v)}function x(n){const t=e.getBoundingClientRect();l.current={x:n.clientX-t.left,y:n.clientY-t.top,active:!0}}function A(){l.current.active=!1}function w(){s.current&&cancelAnimationFrame(s.current);const n=e.getBoundingClientRect();e.width=Math.floor(n.width*Math.min(2,window.devicePixelRatio||1)),e.height=Math.floor(n.height*Math.min(2,window.devicePixelRatio||1)),b=performance.now(),s.current=requestAnimationFrame(v)}return s.current=requestAnimationFrame(v),e.addEventListener("mousemove",x),e.addEventListener("mouseleave",A),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),e.removeEventListener("mousemove",x),e.removeEventListener("mouseleave",A),s.current&&cancelAnimationFrame(s.current)}},[h,t,c]),(0,v.jsxs)(x,{"aria-label":"Tattva S\u016btras panel",$min:a,children:[(0,v.jsxs)(A,{children:[(0,v.jsx)("span",{children:"Tattva S\u016btras"}),(0,v.jsx)(w,{type:"button",onClick:()=>i(e=>!e),"aria-pressed":a,"aria-label":a?"Expand panel":"Collapse panel",children:a?"Show":"Hide"})]}),(0,v.jsxs)(S,{$min:a,"aria-hidden":a,children:[(0,v.jsx)(k,{ref:o}),c&&(0,v.jsxs)(T,{style:{left:c.x,top:c.y,width:c.w},className:"visible",children:[c.sk&&(0,v.jsx)("span",{className:"tip-sk",children:c.sk}),c.tr&&(0,v.jsx)("span",{className:"tip-tr",children:c.tr}),c.ann&&(0,v.jsx)("span",{className:"tip-ann",children:c.ann})]})]})]})}var D,B,R,j,P,C,E,F,I,V,z,H,Y,N,L,K,_,U,O;const W=(0,o.i7)(D||(D=(0,i.A)(["\n  0%   { transform: translate(-4%, -4%) scale(1); opacity: 0.35; }\n  50%  { transform: translate(4%, 4%) scale(1.04); opacity: 0.55; }\n  100% { transform: translate(-4%, -4%) scale(1); opacity: 0.35; }\n"]))),J=o.Ay.div(B||(B=(0,i.A)(["\n  min-height: 100vh;\n  height: 100vh;\n  width: 100%;\n  display: grid;\n  place-items: center;\n  background: radial-gradient(ellipse at center, #070707 0%, #0a0a0a 55%, #000 100%);\n  overflow: hidden;\n  position: relative;\n\n  &::before {\n    content: '';\n    position: absolute;\n    inset: -20%;\n    background: radial-gradient(60% 60% at 35% 40%, rgba(212,175,55,0.10) 0%, rgba(0,0,0,0) 60%),\n                radial-gradient(45% 45% at 70% 65%, rgba(255,215,0,0.08) 0%, rgba(0,0,0,0) 70%);\n    filter: blur(26px);\n    animation: "," 22s ease-in-out infinite;\n    pointer-events: none;\n  }\n"])),W),G=(0,o.Ay)(s.P.div)(R||(R=(0,i.A)(["\n  position: fixed; z-index: 4000; pointer-events: none; font-family: var(--font-devanagari);\n  color: #f6e1a0; text-shadow: 0 0 12px rgba(246,225,160,0.75);\n"]))),$=(0,o.Ay)(s.P.div)(j||(j=(0,i.A)(["\n  width: min(92vw, 980px);\n  display: grid;\n  grid-template-rows: auto auto 1fr auto;\n  gap: var(--spacing-lg);\n  padding: var(--spacing-xl);\n  border-radius: 24px;\n  background: linear-gradient(145deg, rgba(0,0,0,0.9), rgba(10,10,10,0.96));\n  border: 1px solid rgba(212,175,55,0.28);\n  box-shadow: 0 26px 80px rgba(0,0,0,0.75);\n  position: relative;\n  overflow: hidden;\n  flex: 1 1 auto;\n"]))),q=o.Ay.div(P||(P=(0,i.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--spacing-md);\n"]))),X=o.Ay.div(C||(C=(0,i.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n"]))),Q=o.Ay.h1(E||(E=(0,i.A)(["\n  font-family: var(--font-display);\n  color: #e6c76a;\n  font-size: clamp(1.4rem, 3.6vw, 2rem);\n  letter-spacing: 0.06em;\n  margin: 0;\n"]))),Z=o.Ay.p(F||(F=(0,i.A)(["\n  font-family: var(--font-primary);\n  color: #b8941f;\n  opacity: 0.85;\n  margin: 0;\n  font-size: 0.95rem;\n"]))),ee=o.Ay.div(I||(I=(0,i.A)(["\n  width: 260px;\n  height: 10px;\n  background: linear-gradient(145deg, rgba(0,0,0,0.85), rgba(14,14,14,0.95));\n  border: 1px solid rgba(212,175,55,0.35);\n  border-radius: 999px;\n  overflow: hidden;\n"]))),ne=o.Ay.div(V||(V=(0,i.A)(["\n  height: 100%;\n  width: ","%;\n  background: linear-gradient(90deg, #d4af37, #ffd700, #d4af37);\n  transition: width 300ms ease;\n"])),e=>e.$value),te=(0,o.Ay)(s.P.div)(z||(z=(0,i.A)(["\n  border: 1px solid rgba(212,175,55,0.22);\n  border-radius: 18px;\n  background: linear-gradient(145deg, rgba(0,0,0,0.88), rgba(12,12,12,0.96));\n  padding: var(--spacing-xl);\n"]))),ae=o.Ay.h2(H||(H=(0,i.A)(["\n  font-family: var(--font-display);\n  color: #e6c76a;\n  font-size: clamp(1.4rem, 3vw, 1.9rem);\n  margin: 0 0 var(--spacing-sm);\n"]))),ie=o.Ay.p(Y||(Y=(0,i.A)(["\n  font-family: var(--font-primary);\n  color: #b8941f;\n  opacity: 0.9;\n  margin: 0 0 var(--spacing-lg);\n"]))),re=o.Ay.div(N||(N=(0,i.A)(["\n  display: grid;\n  gap: var(--spacing-sm);\n"]))),oe=(0,o.Ay)(s.P.button)(L||(L=(0,i.A)(["\n  appearance: none;\n  width: 100%;\n  padding: 14px 22px;\n  border-radius: 999px;\n  border: 1px solid rgba(212,175,55,0.35);\n  background: linear-gradient(145deg, rgba(0,0,0,0.82), rgba(18,18,18,0.95));\n  color: #e8c86a;\n  font-family: var(--font-primary);\n  font-weight: 700;\n  font-size: 1.02rem;\n  letter-spacing: 0.02em;\n  text-align: left;\n  cursor: pointer;\n  transition: background 0.25s ease, transform 0.18s ease, color 0.25s ease, border-color 0.25s ease;\n  backdrop-filter: blur(8px);\n\n  &:hover {\n    color: #000;\n    background: linear-gradient(145deg, #ffd95e, #ffc82e);\n    border-color: #ffd95e;\n    transform: translateY(-2px);\n  }\n"]))),se=o.Ay.div(K||(K=(0,i.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--spacing-sm);\n"]))),le=(0,o.Ay)(s.P.button)(_||(_=(0,i.A)(["\n  appearance: none;\n  padding: 10px 16px;\n  border-radius: 10px;\n  border: 1px solid rgba(212,175,55,0.35);\n  background: linear-gradient(145deg, rgba(0,0,0,0.82), rgba(18,18,18,0.95));\n  color: #e8c86a;\n  font-family: var(--font-primary);\n  font-weight: 700;\n  letter-spacing: 0.02em;\n  cursor: pointer;\n  transition: background 0.25s ease, transform 0.18s ease, color 0.25s ease, border-color 0.25s ease;\n\n  &:hover {\n    color: #000;\n    background: linear-gradient(145deg, #ffd95e, #ffc82e);\n    border-color: #ffd95e;\n    transform: translateY(-1px);\n  }\n"]))),ce=o.Ay.p(U||(U=(0,i.A)(["\n  margin: 0;\n  text-align: center;\n  font-family: var(--font-primary);\n  font-size: 0.9rem;\n  color: #9f8120;\n  opacity: 0.8;\n"]))),de=o.Ay.div(O||(O=(0,i.A)(["\n  width: min(96vw, 1240px);\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n  gap: var(--spacing-lg);\n  padding: var(--spacing-md);\n  position: relative;\n  z-index: 1;\n\n  @media (max-width: 1020px) {\n    flex-direction: column;\n    align-items: center;\n  }\n"])));function he(){const{dispatch:e}=(0,l.Im)(),[n,t]=(0,r.useState)(0),[i,o]=(0,r.useState)([]),[s,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)({}),[m,g]=(0,r.useState)(null),f=c.length,y=(0,r.useMemo)(()=>Math.round(n/f*100),[n,f]),b=c[n],x=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{if(s)return;const n=parseInt(e.key,10);!Number.isNaN(n)&&n>=1&&n<=b.choices.length&&A(b.choices[n-1]),"Backspace"===e.key&&k()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b,s,n]);const A=(e,n)=>{if(s)return;d(!0);const t={questionId:b.id,choiceId:e.id,guna:e.guna,gana:e.gana,points:e.points};if(o(e=>[...e,t]),e.seed){const t="".concat(b.id,"-").concat(e.id);p(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!0}));try{var i;const t=null===n||void 0===n||null===(i=n.currentTarget)||void 0===i?void 0:i.getBoundingClientRect(),a=document.querySelector('[aria-label="Tattva S\u016btras panel"]'),r=a?a.getBoundingClientRect():null;t&&r&&g({text:e.seed,x:t.left+t.width/2,y:t.top+t.height/2,tx:r.left+r.width-40,ty:r.top+20})}catch(r){}}w()},w=()=>{setTimeout(()=>{const e=n+1;e<f?(t(e),d(!1),x.current&&(x.current.scrollTop=0)):S()},150)},k=()=>{0===n||s||(o(e=>e.slice(0,-1)),t(e=>Math.max(0,e-1)))},S=()=>{const n=u(i);e({type:l.kl.SET_PLAYER_PROFILE,payload:(0,a.A)((0,a.A)({},n),{},{surveyAnswers:i})}),e({type:l.kl.SET_GAME_STATE,payload:l._p.PROFILE_RESULTS})};return(0,v.jsxs)(J,{children:[(0,v.jsxs)(de,{children:[(0,v.jsxs)($,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},role:"form","aria-labelledby":"survey-title",children:[(0,v.jsxs)(q,{children:[(0,v.jsxs)(X,{children:[(0,v.jsx)(Q,{id:"survey-title",children:"\u0100tman Spanda"}),(0,v.jsxs)(Z,{children:["Question ",n+1," of ",f]})]}),(0,v.jsx)(ee,{"aria-label":"Progress ".concat(y,"%"),children:(0,v.jsx)(ne,{$value:y})})]}),(0,v.jsxs)(te,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.35},"aria-live":"polite",children:[(0,v.jsx)(ae,{children:b.title}),b.description&&(0,v.jsx)(ie,{children:b.description}),(0,v.jsx)(re,{ref:x,children:b.choices.map((e,n)=>(0,v.jsxs)(oe,{className:"is-interactive",onClick:n=>A(e,n),whileHover:{scale:1.01},whileTap:{scale:.99},"aria-label":"Choice ".concat(n+1,": ").concat(e.text),disabled:s,children:[n+1,". ",e.text]},e.id))})]},b.id),(0,v.jsxs)(se,{children:[(0,v.jsx)(le,{className:"is-interactive",onClick:k,disabled:0===n||s,whileTap:{scale:.98},children:"\u2190 Back"}),(0,v.jsxs)(ce,{children:["Tip: Use 1\u2013",b.choices.length," keys to pick instantly. Backspace to go back."]})]}),(0,v.jsx)(ce,{children:"The chamber is silent. Choose with stillness."})]}),(0,v.jsx)(M,{pool:(0,r.useMemo)(()=>{const e={},n=[];return i.forEach(t=>{const a=c.find(e=>e.id===t.questionId);if(!a)return;const i=a.choices.find(e=>e.id===t.choiceId);if(!i||!i.seed)return;const r="".concat(a.id,"-").concat(i.id);e[r]||(e[r]=!0,n.push({id:r,sk:i.seed,en:i.transliteration||i.annotation||"",tr:i.transliteration||"",ann:i.annotation||""}))}),n},[i]),discovered:h})]}),m&&(0,v.jsx)(G,{initial:{x:m.x,y:m.y,opacity:1,scale:1},animate:{x:m.tx,y:m.ty,opacity:.2,scale:.8},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>{g(null),setTimeout(()=>d(!1),50)},children:m.text})]})}}}]);
//# sourceMappingURL=801.95f3af98.chunk.js.map